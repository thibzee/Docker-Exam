/*
 * @adonisjs/vite
 *
 * (c) AdonisJS
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
import { addTrailingSlash } from './utils.js';
export class ConfigResolver {
    static resolvedConfig;
    /**
     * Resolve the `config.base` value
     */
    static resolveBase(config, options, command) {
        if (config.base) {
            return config.base;
        }
        if (command === 'build') {
            return addTrailingSlash(options.assetsUrl);
        }
        return '/';
    }
    /**
     * Resolve the `config.resolve.alias` value
     *
     * Basically we are merging the user defined alias with the
     * default alias.
     */
    static resolveAlias(config) {
        const defaultAlias = { '@/': `/resources/js/` };
        if (Array.isArray(config.resolve?.alias)) {
            return [
                ...(config.resolve?.alias ?? []),
                Object.entries(defaultAlias).map(([find, replacement]) => ({ find, replacement })),
            ];
        }
        return { ...defaultAlias, ...config.resolve?.alias };
    }
    /**
     * Resolve the `config.build.outDir` value
     */
    static resolveOutDir(config, options) {
        return config.build?.outDir ?? options.buildDirectory;
    }
}
